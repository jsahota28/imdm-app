{"ast":null,"code":"var _jsxFileName = \"/Users/jaskaransahota/Downloads/imdm_app/frontend/src/components/MovieSearch.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport ReviewForm from \"./ReviewForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MovieSearch() {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [movie, setMovie] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [trailerUrl, setTrailerUrl] = useState(\"\");\n  const omdbKey = \"95ed4707\"; // ← Replace this with your OMDb key\n  const tmdbKey = \"YOUR_TMDB_API_KEY\"; // ← Replace this with your TMDB key\n\n  const fetchTrailer = async movieName => {\n    try {\n      var _searchRes$data$resul;\n      const searchRes = await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=${tmdbKey}&query=${movieName}`);\n      const movieId = (_searchRes$data$resul = searchRes.data.results[0]) === null || _searchRes$data$resul === void 0 ? void 0 : _searchRes$data$resul.id;\n      if (!movieId) return;\n      const videoRes = await axios.get(`https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=${tmdbKey}`);\n      const trailer = videoRes.data.results.find(v => v.type === \"Trailer\" && v.site === \"YouTube\");\n      if (trailer) {\n        setTrailerUrl(`https://www.youtube.com/embed/${trailer.key}`);\n      } else {\n        setTrailerUrl(\"\");\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch trailer\", err);\n      setTrailerUrl(\"\");\n    }\n  };\n  const fetchMovie = async () => {\n    try {\n      const response = await axios.get(`https://www.omdbapi.com/?t=${query}&apikey=${omdbKey}`);\n      if (response.data.Response === \"True\") {\n        setMovie(response.data);\n        setError(\"\");\n        fetchTrailer(query);\n      } else {\n        setError(\"Movie not found.\");\n        setMovie(null);\n        setTrailerUrl(\"\");\n      }\n    } catch {\n      setError(\"Error fetching data.\");\n    }\n  };\n  const saveFavorite = async () => {\n    try {\n      await axios.post(\"http://localhost:5000/favorites\", {\n        title: movie.Title,\n        user_id: 1\n      });\n      alert(\"Added to favorites!\");\n    } catch {\n      alert(\"Failed to save favorite.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Search a Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: query,\n      placeholder: \"Enter movie title\",\n      onChange: e => setQuery(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchMovie,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), movie && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: movie.Title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: movie.Plot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: movie.Poster,\n        alt: movie.Title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveFavorite,\n        children: \"Save to Favorites\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ReviewForm, {\n        userId: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), trailerUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Trailer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          width: \"560\",\n          height: \"315\",\n          src: trailerUrl,\n          frameBorder: \"0\",\n          allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n          allowFullScreen: true,\n          title: \"Trailer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(MovieSearch, \"4BXJilQnyRprXpJvw1VDxCKPWCY=\");\n_c = MovieSearch;\nexport default MovieSearch;\nvar _c;\n$RefreshReg$(_c, \"MovieSearch\");","map":{"version":3,"names":["React","useState","axios","ReviewForm","jsxDEV","_jsxDEV","MovieSearch","_s","query","setQuery","movie","setMovie","error","setError","trailerUrl","setTrailerUrl","omdbKey","tmdbKey","fetchTrailer","movieName","_searchRes$data$resul","searchRes","get","movieId","data","results","id","videoRes","trailer","find","v","type","site","key","err","console","fetchMovie","response","Response","saveFavorite","post","title","Title","user_id","alert","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","value","placeholder","onChange","e","target","onClick","marginTop","Plot","src","Poster","alt","userId","width","height","frameBorder","allow","allowFullScreen","_c","$RefreshReg$"],"sources":["/Users/jaskaransahota/Downloads/imdm_app/frontend/src/components/MovieSearch.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport ReviewForm from \"./ReviewForm\";\n\nfunction MovieSearch() {\n  const [query, setQuery] = useState(\"\");\n  const [movie, setMovie] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [trailerUrl, setTrailerUrl] = useState(\"\");\n\n  const omdbKey = \"95ed4707\";     // ← Replace this with your OMDb key\n  const tmdbKey = \"YOUR_TMDB_API_KEY\";     // ← Replace this with your TMDB key\n\n  const fetchTrailer = async (movieName) => {\n    try {\n      const searchRes = await axios.get(\n        `https://api.themoviedb.org/3/search/movie?api_key=${tmdbKey}&query=${movieName}`\n      );\n\n      const movieId = searchRes.data.results[0]?.id;\n      if (!movieId) return;\n\n      const videoRes = await axios.get(\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=${tmdbKey}`\n      );\n\n      const trailer = videoRes.data.results.find(\n        (v) => v.type === \"Trailer\" && v.site === \"YouTube\"\n      );\n\n      if (trailer) {\n        setTrailerUrl(`https://www.youtube.com/embed/${trailer.key}`);\n      } else {\n        setTrailerUrl(\"\");\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch trailer\", err);\n      setTrailerUrl(\"\");\n    }\n  };\n\n  const fetchMovie = async () => {\n    try {\n      const response = await axios.get(\n        `https://www.omdbapi.com/?t=${query}&apikey=${omdbKey}`\n      );\n      if (response.data.Response === \"True\") {\n        setMovie(response.data);\n        setError(\"\");\n        fetchTrailer(query);\n      } else {\n        setError(\"Movie not found.\");\n        setMovie(null);\n        setTrailerUrl(\"\");\n      }\n    } catch {\n      setError(\"Error fetching data.\");\n    }\n  };\n\n  const saveFavorite = async () => {\n    try {\n      await axios.post(\"http://localhost:5000/favorites\", {\n        title: movie.Title,\n        user_id: 1,\n      });\n      alert(\"Added to favorites!\");\n    } catch {\n      alert(\"Failed to save favorite.\");\n    }\n  };\n\n  return (\n    <div style={{ padding: \"20px\" }}>\n      <h2>Search a Movie</h2>\n      <input\n        type=\"text\"\n        value={query}\n        placeholder=\"Enter movie title\"\n        onChange={(e) => setQuery(e.target.value)}\n      />\n      <button onClick={fetchMovie}>Search</button>\n\n      {error && <p>{error}</p>}\n      {movie && (\n        <div style={{ marginTop: \"20px\" }}>\n          <h3>{movie.Title}</h3>\n          <p>{movie.Plot}</p>\n          <img src={movie.Poster} alt={movie.Title} />\n          <br />\n          <button onClick={saveFavorite}>Save to Favorites</button>\n          <ReviewForm userId={1} />\n\n          {trailerUrl && (\n            <div style={{ marginTop: \"20px\" }}>\n              <h4>Trailer</h4>\n              <iframe\n                width=\"560\"\n                height=\"315\"\n                src={trailerUrl}\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n                title=\"Trailer\"\n              ></iframe>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default MovieSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}